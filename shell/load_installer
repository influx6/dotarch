#!/bin/bash

install_files=$Dotfiles/installers


install_one(){
    if is_ubuntu; then
        location="$install_files/ubuntu/$1.sh"
        echo "TryUbuntu: Executing: $location"
        if [ -e $location ]; then
            name=$(basename "$location")
            echo "Executing script: ${name} from $location"
            . $location
            return 0
        fi
        location="$install_files/every/$1.sh"
        echo "TryUbuntu: Executing: $location"
        if [ -e $location ]; then
            name=$(basename "$location")
            echo "Executing script: ${name} from $location"
            . $location
        fi
    fi
    if is_archlinux; then
        location="$install_files/archlinux/$1.sh"
        echo "TryArch: Executing: $location"
        if [ -e $location ]; then
            name=$(basename "$location")
            echo "Executing script: ${name} from $location"
            . $location
            return 0
        fi
        location="$install_files/every/$1.sh"
        echo "TryArch: Executing: $location"
        if [ -e $location ]; then
            name=$(basename "$location")
            echo "Executing script: ${name} from $location"
            . $location
        fi
    fi
    if is_mac; then
        echo "Not yet supported or setup"
    fi
}


install_all(){
    if is_ubuntu; then
        location="$install_files/ubuntu/$1"
        echo "TryUbuntu: Executing: $location"
        if [ -d $location ]; then
            for f in "$location"/*.sh; do
            name=$(basename "$f")
            echo "Executing script: ${name}"
            . $f
            done
            return 0
        fi
        location="$install_files/every/$1"
        echo "TryUbuntu: Executing: $location"
        if [ -d $location ]; then
            for f in "$location"/*.sh; do
                name=$(basename "$f")
                echo "Executing script: ${name}"
                . $f
            done
        fi
    fi
    if is_archlinux; then
        location="$install_files/archlinux/$1"
        echo "TryArch: Executing: $location"
        if [ -d $location ]; then
            for f in "$location"/*.sh; do
            name=$(basename "$f")
            echo "Executing script: ${name}"
            . $f
            done
            return 0
        fi
        location="$install_files/every/$1"
        echo "TryArch: Executing: $location"
        if [ -d $location ]; then
            for f in "$location"/*.sh; do
                name=$(basename "$f")
                echo "Executing script: ${name}"
                . $f
            done
        fi
    fi
    if is_mac; then
        echo "Not yet supported or setup"
    fi
}
